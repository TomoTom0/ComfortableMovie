# Comfort Movie

快適な動画視聴環境を提供するChrome拡張機能です。動画を画面全体に最大化し、スマートなコントロール機能で集中して動画を視聴できます。

## 機能

- **動画の最大化**: 動画をウィンドウ全体に表示（アスペクト比は維持）
- **スマートコントロール**: 動画下部2秒ホバーまたはクリックでコントロール有効化、離脱3秒で自動無効化
- **確実な前面表示**: z-index制御で他の要素が動画を隠さない
- **超薄い解除ボタン**: 右下の控えめな「×」ボタンで解除（動画外では背景透明）
- **複数解除方法**: ESCキー、右クリックメニュー、拡張機能アイコン対応
- **即座のタッチ操作**: 動画下部タップで即座にコントロール有効化

## インストール方法

1. このプロジェクトをダウンロードまたはクローン
2. `npm install` で依存関係をインストール
3. `npm run build` でビルド
4. Chromeで `chrome://extensions/` を開く
5. 「デベロッパーモード」をオンにする
6. 「パッケージ化されていない拡張機能を読み込む」をクリック
7. `dist` フォルダを選択

## 使用方法

### 快適モードの開始
- 任意のページで右クリック → 「快適動画モードを切り替え」
- または拡張機能のアイコンをクリック

### 動画コントロール
- **ホバー操作**: 動画下部20%エリアにマウスを2秒間置くとコントロール有効化
- **タップ操作**: 動画下部20%エリアをクリック（タップ）すると即座にコントロール有効化
- **自動無効化**: 動画から3秒間離れると自動的にコントロール無効化
- **ホバー効果**: 解除ボタンのホバー効果はコントロール有効時のみ動作

### 快適モードの解除
- 右下の「×」ボタンをクリック
- または ESC キーを押す

## 開発

### 必要な環境
- Node.js 16+
- npm

### スクリプト
- `npm run build`: TypeScriptをビルドしてdistフォルダに出力
- `npm run watch`: ファイル変更を監視してリアルタイムビルド
- `npm run clean`: ビルドファイルを削除
- `npm run rebuild`: クリーンビルド
- `./build-and-deploy.sh`: ビルドとデプロイを一括実行

### プロジェクト構造
```
comfortable-movie/
├── src/
│   ├── content.ts      # コンテンツスクリプト（メイン機能）
│   ├── background.ts   # バックグラウンドスクリプト（右クリックメニュー）
│   └── content.css     # スタイルシート
├── dist/               # ビルド出力フォルダ
├── .env                # 環境設定（デプロイ先など）
├── build-and-deploy.sh # ビルド・デプロイスクリプト
├── manifest.json       # Chrome拡張機能の設定
├── package.json        # プロジェクト設定
└── tsconfig.json       # TypeScript設定
```

## 技術仕様

- **TypeScript**: 型安全な開発
- **Manifest V3**: 最新のChrome拡張機能API
- **アスペクト比保持**: 動画の縦横比を維持した最大化
- **レスポンシブ**: ウィンドウサイズ変更に対応

## ドキュメント

- [使用方法](doc/user/usage.md) - 詳細な機能説明とトラブルシューティング
- [開発ガイド](doc/dev/development.md) - 技術仕様と開発フロー
- [API リファレンス](doc/dev/api.md) - 関数・変数・イベントの詳細

## ライセンス

MIT License